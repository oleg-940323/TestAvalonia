<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:TestAvalonia.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="clr-namespace:TestAvalonia.Models"
        xmlns:system="clr-namespace:System;assembly=System.Runtime"
		xmlns:avalonia="clr-namespace:Avalonia;assembly=Avalonia"
		xmlns:avaloniaControls="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="TestAvalonia.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="TestAvalonia">

	<Window.Resources>
		<models:ColumnWidthConverter x:Key="ColumnWidthConverter"/>
	</Window.Resources>
	
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="auto" MinWidth="120"/>
      <ColumnDefinition Width="auto"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Stretch">

      <TextBox x:Name="Search" Width="{Binding ColumnDefinitions[0].Width, 
                         RelativeSource={RelativeSource AncestorType=Grid},
                         Converter={StaticResource ColumnWidthConverter}}"
			   MinWidth="120" Height="20" HorizontalAlignment="Center"
			   Margin="4,4,4,0"></TextBox>
               <!--VerticalAlignment="Center" TextChanged="Search_TextChanged"-->

		<!--<TreeView ItemsSource="{Binding SortBooks}" BorderThickness="0" Padding="0">
			<TreeView.ItemTemplate>
				<TreeDataTemplate ItemsSource="{Binding Books}">
					<TextBlock Text="{Binding Genre}"/>
				</TreeDataTemplate>
			</TreeView.ItemTemplate>
			<TreeView.DataTemplates>
				<TreeDataTemplate DataType="{x:Type models:Book}">
					<TextBlock Text="{Binding Name}" Margin="0,2,0,2"/>
				</TreeDataTemplate>
			</TreeView.DataTemplates>
		</TreeView>-->
		<avaloniaControls:treed="" TreeDataGrid ItemsSource ="{Binding SortBooks}">
			<avaloniaControls: TreeDataGrid.Columns>
				<avaloniaControls:TreeDataGridTextColumn Title="Genre" Property="Genre" />
				<avaloniaControls:TreeDataTemplate>
					<ListBox ItemsSource="{Binding Group}">
					</ListBox>
				</avaloniaControlsTreeDataTemplate>
			</avaloniaControlsTreeDataGrid.Columns>
		</avaloniaControlsTreeDataGrid>
    </StackPanel>

    <DataGrid x:Name="Data" AutoGenerateColumns="False"
              ItemsSource="{Binding CommonBooks}" IsReadOnly="True"
              GridLinesVisibility="All"
              Grid.Column="2" HeadersVisibility="Column"
			  CanUserResizeColumns="True">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Жанр" Binding="{Binding Genre}"/>
        <DataGridTextColumn Header="Название" Binding="{Binding Name}"/>
        <DataGridTextColumn Header="Автор" Binding="{Binding Author}"/>
      </DataGrid.Columns>
    </DataGrid>

	  <GridSplitter Grid.Column="1" Width="2" BorderBrush="Gray" BorderThickness="1" HorizontalAlignment="Left" Background="#DDDDDD" Cursor="SizeWestEast"
					ResizeBehavior="PreviousAndNext" ResizeDirection="Columns">
	  </GridSplitter>

  </Grid>

</Window>
